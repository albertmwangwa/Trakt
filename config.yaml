# Camera configuration
# For single camera mode, use 'camera' configuration
# For multi-camera mode, use 'cameras' configuration (list)
camera:
  # ONVIF camera connection settings
  host: "192.168.1.100"  # Camera IP address
  port: 80               # ONVIF port (usually 80 or 8080)
  username: "admin"      # Camera username
  password: "password"   # Camera password
  
  # Stream settings
  stream_profile: 0      # Profile token (0 for main stream, 1 for sub stream)
  transport: "tcp"       # Transport protocol: tcp or udp
  
  # Frame capture settings
  fps_limit: 5           # Frames per second to process (lower = less CPU usage)
  resolution:
    width: 1920
    height: 1080

# Multi-camera configuration (optional)
# Uncomment and configure to use multiple cameras simultaneously
# cameras:
#   - name: "Front_Entrance"
#     host: "192.168.1.100"
#     port: 80
#     username: "admin"
#     password: "password"
#     stream_profile: 0
#     transport: "tcp"
#     fps_limit: 5
#   - name: "Back_Entrance"
#     host: "192.168.1.101"
#     port: 80
#     username: "admin"
#     password: "password"
#     stream_profile: 0
#     transport: "tcp"
#     fps_limit: 5

# OCR configuration
ocr:
  # OCR engine: 'tesseract' or 'easyocr'
  engine: "easyocr"
  
  # Enable EAST text detector for region-based OCR (improves accuracy)
  use_text_detection: false  # Set to true to enable EAST text detection
  
  # Text detection settings (for EAST detector)
  text_detection:
    east_model_path: "./models/frozen_east_text_detection.pb"
    confidence_threshold: 0.5
    nms_threshold: 0.4
    input_width: 320
    input_height: 320
    region_padding: 5  # Pixels to pad around detected regions
  
  # Preprocessing settings for text regions
  preprocessing:
    apply_deskewing: true
    apply_contrast_enhancement: false
    apply_noise_removal: false
    apply_illumination_normalization: true
  
  # Tesseract settings
  tesseract:
    language: "eng"      # OCR language (eng, fra, deu, etc.)
    oem: 3               # OCR Engine Mode (0-3)
    psm: 6               # Page Segmentation Mode (0-13)
    
  # EasyOCR settings
  easyocr:
    languages: ["en"]    # List of languages to recognize
    gpu: false           # Use GPU acceleration
    model_storage_directory: "./models/easyocr"
  
  # Text detection thresholds
  confidence_threshold: 0.5  # Minimum confidence to consider detection valid
  
  # Text filtering
  min_text_length: 2     # Minimum characters to consider
  strict_pattern_matching: false  # Only keep detections matching filter_patterns
  filter_patterns:       # Regex patterns to filter/highlight
    - "[0-9]{3,}"        # Numbers with 3+ digits
    - "[A-Z]{2,}"        # Uppercase sequences

# TensorFlow model configuration
tensorflow:
  # Model settings
  model_path: "./models/custom_ocr_model.h5"  # Path to custom TensorFlow model
  use_pretrained: false  # Use pretrained model if available
  
  # Processing settings
  batch_size: 1
  input_shape: [224, 224, 3]  # Model input shape [height, width, channels]
  
  # GPU settings
  gpu_memory_limit: 2048  # MB, set to null for no limit
  allow_growth: true      # Allow GPU memory to grow as needed

# Output configuration
output:
  # Save detected text
  save_results: true
  results_dir: "./output/results"
  
  # Save annotated frames
  save_frames: true
  frames_dir: "./output/frames"
  save_interval: 30      # Save every N frames
  
  # Logging
  log_level: "INFO"      # DEBUG, INFO, WARNING, ERROR
  log_file: "./output/trakt.log"

# Application settings
app:
  # Multi-camera mode
  multi_camera_mode: false  # Set to true to use 'cameras' configuration
  
  # Reconnection settings
  reconnect_attempts: 5
  reconnect_delay: 5     # seconds
  
  # Performance
  use_threading: true
  num_threads: 2
  
  # Display
  show_preview: false    # Show live preview window
  preview_scale: 0.5     # Scale factor for preview window

# Database configuration
database:
  enabled: true
  url: "sqlite:///./output/trakt.db"  # SQLite database file
  # For PostgreSQL: "postgresql://user:password@localhost/trakt"
  # For MySQL: "mysql://user:password@localhost/trakt"

# Alert system configuration
alerts:
  enabled: false  # Enable alert system
  
  # Alert patterns (regex patterns to trigger alerts)
  patterns:
    - pattern: "[A-Z]{3}[0-9]{3}"  # License plate pattern
      name: "license_plate"
    - pattern: "EMERGENCY|ALERT|WARNING"
      name: "emergency_text"
    - pattern: "[0-9]{3}-[0-9]{3}-[0-9]{4}"
      name: "phone_number"
  
  # Alert types to trigger
  alert_types:
    - "log"      # Log to console/file
    # - "email"  # Send email
    # - "webhook"  # Send to webhook
  
  # Cooldown period to prevent spam (seconds)
  cooldown_seconds: 60
  
  # Email configuration (if email alerts enabled)
  email:
    enabled: false
    smtp_server: "smtp.gmail.com"
    smtp_port: 587
    username: "your-email@gmail.com"
    password: "your-app-password"
    from_email: "your-email@gmail.com"
    to_emails:
      - "recipient@example.com"
  
  # Webhook configuration (if webhook alerts enabled)
  webhook:
    enabled: false
    url: "https://your-webhook-url.com/alerts"
    method: "POST"  # POST or GET
    headers:
      Content-Type: "application/json"
    timeout: 10
